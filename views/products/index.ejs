<% layout('layout') %>

<style>
  body{
    background-color: white;
  }
    .heavy-card {
        background: white;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        border: 1px solid #eee;
        transition: all 0.3s ease;
        height: 100%;
        cursor: pointer;
    }
    .heavy-card:hover {
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        transform: translateY(-3px);
    }
    .card-img-box {
        height: 160px;
        padding: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #f9f9f9;
        border-bottom: 1px solid #f0f0f0;
    }
    .heavy-card img {
        max-height: 100%;
        max-width: 100%;
        object-fit: contain;
    }
    .wishlist-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        border: none;
        color: #ff6b6b;
        z-index: 2;
    }
    .wishlist-btn:hover {
        background: #ff6b6b;
        color: white;
    }
    .card-details {
        padding: 15px;
    }
    .product-name {
        font-weight: 600;
        font-size: 15px;
        color: #333;
        margin-bottom: 5px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    .product-desc {
        font-size: 13px;
        color: #666;
        margin-bottom: 10px;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    .product-price {
        font-weight: 700;
        font-size: 16px;
        color: #28a745;
    }
</style>

<div class="container mt-3">
  <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 g-3">
    <% products.forEach(product => { %>
      <div class="col">
        <a href="/products/<%= product._id %>" class="text-decoration-none text-dark">
          <div class="heavy-card">
            <div class="card-img-box position-relative">
              <img src="<%= product.image %>" alt="<%= product.name %>">
              <form action="/wishlist/add/<%= product._id %>" method="POST" onclick="event.stopPropagation()">
                <button type="submit" class="wishlist-btn">❤</button>
              </form>
            </div>
            <div class="card-details">
              <div class="product-name"><%= product.name %></div>
             <b> <div class="product-desc"><%= product.title %></div></b>
              <div class="product-price">₹<%= product.price %></div>
            </div>
          </div>
        </a>
      </div>
    <% }) %>
  </div>
</div>
