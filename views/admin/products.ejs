<% layout('layout') %>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1 class="h3">All Products</h1>
      <a href="/admin/products/new" class="btn btn-primary">Add New Product</a>
    </div>

    <% if (products.length === 0) { %>
      <div class="alert alert-info">No products found. Add your first product!</div>
    <% } else { %>
      <div class="list-group">
        <% products.forEach(p => { %>
          <div class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <strong><%= p.title %></strong> — ₹<%= p.price %>
            </div>
            <div class="d-flex gap-2">
              <a href="/admin/products/<%= p._id %>/edit" class="btn btn-sm btn-outline-primary">Edit</a>
              <form method="POST" action="/admin/products/<%= p._id %>?_method=DELETE" onsubmit="return confirm('Are you sure?');">
                <button class="btn btn-sm btn-outline-danger">Delete</button>
              </form>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
